<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <title>Product Recommendations</title>
</head>
<body>

<div class="container">
  <h2>Select Products you owned:</h2>
    <form id="recommendationForm">
        <div class="row">
            <div class="col-6">
                 <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="checkbox1">
                    <label class="form-check-label" for="checkbox1">Saving Account</label>
                  </div>

                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="checkbox2">
                    <label class="form-check-label" for="checkbox2">Guarantees</label>
                  </div>

                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="checkbox3">
                    <label class="form-check-label" for="checkbox3">Current Accounts</label>
                  </div>

                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="checkbox4">
                    <label class="form-check-label" for="checkbox4">Derivada Account</label>
                  </div>

                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="checkbox5">
                    <label class="form-check-label" for="checkbox5">Payroll Account</label>
                  </div>

                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="checkbox6">
                    <label class="form-check-label" for="checkbox6">Junior Account</label>
                  </div>

                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="checkbox7">
                    <label class="form-check-label" for="checkbox7">MÃ¡s Particular Account</label>
                  </div>

                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="checkbox8">
                    <label class="form-check-label" for="checkbox8">Particular Account</label>
                  </div>

                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="checkbox9">
                    <label class="form-check-label" for="checkbox9">Particular Plus Account</label>
                  </div>

                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="checkbox10">
                    <label class="form-check-label" for="checkbox10">Short-term Deposits</label>
                  </div>

                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="checkbox11">
                    <label class="form-check-label" for="checkbox11">Medium-term Deposits</label>
                  </div>

                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="checkbox12">
                    <label class="form-check-label" for="checkbox12">Long-term Deposits</label>
                  </div>
            </div>

            <div class="col-6">

                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="checkbox13">
                  <label class="form-check-label" for="checkbox13">E-account</label>
                </div>

                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="checkbox14">
                  <label class="form-check-label" for="checkbox14">Funds</label>
                </div>

                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="checkbox15">
                  <label class="form-check-label" for="checkbox15">Mortgage</label>
                </div>

                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="checkbox16">
                  <label class="form-check-label" for="checkbox16">Plan Pensions</label>
                </div>

                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="checkbox17">
                  <label class="form-check-label" for="checkbox17">Loans</label>
                </div>

                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="checkbox18">
                  <label class="form-check-label" for="checkbox18">Taxes</label>
                </div>

                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="checkbox19">
                  <label class="form-check-label" for="checkbox19">Credit Card</label>
                </div>

                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="checkbox20">
                  <label class="form-check-label" for="checkbox20">Securities</label>
                </div>

                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="checkbox21">
                  <label class="form-check-label" for="checkbox21">Home Account</label>
                </div>

                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="checkbox22">
                  <label class="form-check-label" for="checkbox22">Payroll</label>
                </div>

                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="checkbox23">
                  <label class="form-check-label" for="checkbox23">Pensions</label>
                </div>

                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="checkbox24">
                  <label class="form-check-label" for="checkbox24">Direct Debit</label>
                </div>
            </div>

        </div>

     <button class="mt-2 btn btn-primary" type="button" onclick="submitForm()">Get recommendations</button>
</form>

</div>

<section class="container">
    <div class="recommendation-container"></div>
</section>
<section class="container" style="display: none;" id="loadingContainer">
    Getting recommendations...
</section>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>


<script>
function submitForm() {
     const recommendationContainer = document.querySelector('.recommendation-container');
    recommendationContainer.innerHTML = '';
    document.getElementById('loadingContainer').style.display = 'block';
  // Get the values of the checkboxes
  const checkboxes = document.querySelectorAll('input[type="checkbox"]');
  const selectedValues = Array.from(checkboxes).map(checkbox => checkbox.checked ? 1 : 0);

  // Send the selected values to the server using AJAX
  fetch('/submit_recommendation', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({ values: selectedValues }),
  })
  .then(response => response.json())
  .then(data => {
       document.getElementById('loadingContainer').style.display = 'none';
    const recommendationData = data.data.rec;
    updateUI(recommendationData);
  })
  .catch(error => {
    console.error('Error:', error);
    document.getElementById('loadingContainer').style.display = 'none';
  });
}


function updateUI(recommendationData) {
    // Clear existing recommendations
    const recommendationContainer = document.querySelector('.recommendation-container');
    recommendationContainer.innerHTML = '';

    // Create a new element for each recommendation and append it to the container
    for (const [product, value] of Object.entries(recommendationData)) {
        const recommendationElement = document.createElement('p');
        recommendationElement.textContent = `${value}`;
        recommendationContainer.appendChild(recommendationElement);
    }
}

</script>

</body>
</html>
